(function(t){function e(e){for(var a,c,o=e[0],s=e[1],u=e[2],l=0,p=[];l<o.length;l++)c=o[l],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},i=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"5c0b":function(t,e,n){"use strict";var a=n("8624"),r=n.n(a);r.a},6:function(t,e){},"6f5f":function(t,e,n){t.exports=n.p+"img/FactsMissionTEO.167b9ed1.png"},7:function(t,e){},8:function(t,e){},8624:function(t,e,n){},9:function(t,e){},cd49:function(t,e,n){"use strict";n.r(e);n("e623"),n("e379"),n("5dc8"),n("37e1");var a,r,i=n("2b0e"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("main",{staticClass:"container"},[n("classic")],1),t._m(1)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"plazi-header"},[a("div",{staticClass:"container"},[a("a",{attrs:{href:"http://plazi.org/"}},[a("img",{attrs:{src:"http://plazi.org/fileadmin/templates/img/logo.png",alt:"Plazi - take care of freedom",width:"200",height:"50"}})]),a("a",{attrs:{href:"https://factsmission.com"}},[a("img",{attrs:{src:n("6f5f"),alt:"FactsMission",height:"20"}})])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plazi-footer"},[n("div",{staticClass:"container"},[t._v(" Synospecies is created and maintained by "),n("a",{attrs:{href:"https://factsmission.com"}},[t._v("FactsMission")]),t._v(" and uses the taxonomic treatment data provided by "),n("a",{attrs:{href:"http://plazi.org/"}},[t._v("Plazi")]),t._v(". ")])])}],s=n("276c"),u=n("e1a7"),d=n("f20d"),l=n("920b"),p=n("9ab4"),f=n("60a3"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("SynoSpecies")]),n("form",{attrs:{id:"search-form"}},[n("span",[t._v("Input Genus and species here:")]),n("input",{attrs:{type:"text",id:"combinedfield",placeholder:"Sadayoshia acroporae"}}),n("button",{attrs:{id:"lookup"},on:{click:function(e){return e.preventDefault(),t.onClick(e)}}},[t._v("Look up")])]),n("hr"),n("div",{staticClass:"section",attrs:{id:"taxon-name"}}),n("div",{staticClass:"section",attrs:{id:"image-area"}}),n("div",{staticClass:"section",attrs:{id:"vernacular-area"}}),n("div",{staticClass:"section",attrs:{id:"wikidata-area"}})])},h=[],g=(n("c975"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("841c"),n("ddb0"),n("2b3d"),n("e954")),v=(n("2d26"),n("96cf"),n("9dbb"),n("91b7")),b=n.n(v),w=n("6d5e"),T=n.n(w),x=n("a36f"),y=n.n(x),O=function(){function t(e){Object(s["a"])(this,t),this._element=e,this._taxonNames={},this._sparqlEndpoint=new b.a("https://query.wikidata.org/sparql"),this._query=function(t){return'\n            DESCRIBE ?item WHERE \n            {\n                ?item wdt:P225 "'.concat(t,'"\n            }')}}return Object(g["a"])(t,[{key:"addTaxon",value:function(t){var e=this;function n(t){return T.a.sym("http://www.wikidata.org/prop/direct/"+t)}function a(t){return T.a.sym("http://www.wikidata.org/entity/"+t)}function r(t){return T.a.sym("http://schema.org/"+t)}function i(t){var e='<div>Wikidata Resource: <a href="'+t.value+'">'+t.value+"</a>";return e+="<ul>",t.out(n("P225")).each((function(t){e+="<li>Taxon Name "+t.value+"</li>"})),t.in(r("about")).each((function(t){e+='<li>Is subject of: <a href="'+t.value+'">'+decodeURI(t.value)+"</a></li>"})),t.out(n("P846")).each((function(t){e+='<li>GBIF ID <a href="https://www.gbif.org/species/'+t.value+'">'+t.value+"</a></li>"})),e+="</ul>",e+="</div>",e}if(!this._taxonNames[t])return this._taxonNames[t]=!0,this._sparqlEndpoint.getSparqlRDF(this._query(t)).then((function(e){if(0===e.length)throw Error("Not in wikidata: "+t);var r=y()(a("Q16521"),e),i=r.in(n("P31"));return 0===i.nodes.length&&(r=y()(a("Q23038290"),e),i=r.in(n("P31"))),i})).then((function(t){e._element.innerHTML=e._element.innerHTML+i(t)}))}},{key:"reset",value:function(){this._element.innerHTML="",this._taxonNames={}}}]),t}(),_=(n("99af"),function(){function t(e){Object(s["a"])(this,t),this._element=e,this._taxonUrls={},this._sparqlEndpoint=new b.a("https://vernacular.plazi.org/sparql"),this._query=function(t){return"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix slang: <https://vocab.plazi.org/vernacular/>\n\nSELECT DISTINCT ?value (GROUP_CONCAT(DISTINCT(?af); separator='; ') as ?afs) WHERE {\n    GRAPH ?g {\n        ?no a slang:NameOccurrence .\n        ?no rdf:value ?value .\n        OPTIONAL { ?no slang:areaFine ?af . }\n        ?no slang:taxon <".concat(t,"> .\n    }\n}\nGROUP BY ?value")}}return Object(g["a"])(t,[{key:"addTaxonUrl",value:function(t){var e=this,n=function(t){if(t.length>0){for(var e='<table class="table"><thead><tr><th scope="col">Vernacular Name</th><th scope="col">Area</th></tr></thead><tbody>',n=0;n<t.length;n++)e+="<tr><td>".concat(t[n].value.value,"</td><td>").concat(t[n].afs.value,"</td></tr>");return e+="</tbody></table>",e}return!1};if(!this._taxonUrls[t])return this._taxonUrls[t]=!0,this._sparqlEndpoint.getSparqlResultSet(this._query(t)).then((function(t){e._element.innerHTML=n(t.results.bindings)||""}))}},{key:"addTaxon",value:function(t){return this.addTaxonUrl("http://taxon-concept.plazi.org/id/Plantae/"+t.replace(/\s/g,"_"))}},{key:"reset",value:function(){this._element.innerHTML="",this._taxonUrls={}}}]),t}()),E=(n("a4d3"),n("e01a"),n("4160"),n("fb6a"),n("b64b"),n("159b"),function(){function t(e,n){Object(s["a"])(this,t),this._element=n,this._taxaManager=e,this.addedImages={},this.to_html=function(t){var e=t.description||"",n=document.createElement("figure"),a=document.createElement("img");a.setAttribute("src",t.url),a.setAttribute("alt",e);var r=document.createElement("figcaption");if(e.length>400){r.innerHTML=e.slice(0,401)+'<span hidden aria-hidden="false">'+e.slice(401)+"</span>";var i=document.createElement("span");i.innerHTML="...",i.classList.add("expandbtn"),i.addEventListener("click",(function(t){r.innerHTML=e,t.preventDefault()})),r.append(i)}else r.textContent=e;return n.append(a),n.append(r),n}}return Object(g["a"])(t,[{key:"appendImages",value:function(t){var e=this;this._taxaManager.getImages(t).then((function(t){t.forEach((function(t){e.addedImages[t.url]||(e.addedImages[t.url]=!0,e._element.append(e.to_html(t)))})),Object.keys(e.addedImages).length<=2?e._element.classList.add("twocol"):3===Object.keys(e.addedImages).length&&e._element.classList.add("threecol")}))}},{key:"reset",value:function(){this._element.innerHTML="",this._element.classList.remove("twocol"),this._element.classList.remove("threecol"),this.addedImages={}}}]),t}()),k=(n("d81d"),function(){function t(e){Object(s["a"])(this,t),this._sparqlEndpoint=e}return Object(g["a"])(t,[{key:"getNewTaxa",value:function(t){var e="PREFIX treat: <http://plazi.org/vocab/treatment#>\nPREFIX dwc: <http://rs.tdwg.org/dwc/terms/>\nPREFIX dc: <http://purl.org/dc/elements/1.1/>\nCONSTRUCT {\n  ?tc dwc:rank ?rank .\n  ?tc dwc:phylum ?phylum .\n  ?tc dwc:kingdom ?kingdom .\n  ?tc dwc:class ?class .\n  ?tc dwc:family ?family .\n  ?tc dwc:order ?oder .\n  ?tc dwc:genus ?genus .\n  ?tc dwc:species ?species .\n  ?tc a <http://filteredpush.org/ontologies/oa/dwcFP#TaxonConcept> .\n  ?treatment treat:preferedName ?tc.\n  ?treatment dc:creator ?treatmentCreator .\n  ?treatment dc:date ?date . \n  ?augmentingTreatment treat:augmentsTaxonConcept ?tc .\n  ?augmentingTreatment dc:creator ?augmentingTreatmentCreator .\n  ?augmentingTreatment dc:date ?augmentingDate . \n  ?definingTreatment treat:definesTaxonConcept ?tc .\n  ?definingTreatment dc:creator ?definingTreatmentCreator .\n  ?definingTreatment dc:date ?definingDate . \n} WHERE { \n  ?treatment (treat:augmentsTaxonConcept|treat:definesTaxonConcept) ?tc .\n  ?treatment treat:deprecates <"+t+">.\n  ?tc dwc:rank ?rank .\n  ?tc dwc:phylum ?phylum .\n  ?tc dwc:kingdom ?kingdom .\n  ?tc dwc:class ?class .\n  ?tc dwc:family ?family .\n  ?tc dwc:order ?oder .\n  ?tc dwc:genus ?genus .\n  ?tc dwc:species ?species .\n  ?treatment ?treatmentTaxonRelation ?tc .\n  ?treatment dc:creator ?treatmentCreator .\n  OPTIONAL { ?treatment treat:publishedIn ?publ .\n    ?publ dc:date ?date . } \n  OPTIONAL { ?augmentingTreatment treat:augmentsTaxonConcept ?tc .\n    ?augmentingTreatment dc:creator ?augmentingTreatmentCreator .\n    OPTIONAL { ?augmentingTreatment treat:publishedIn ?augmentingPubl .\n      ?augmentingPubl dc:date ?augmentingDate . }} \n  OPTIONAL { ?definingTreatment treat:definesTaxonConcept ?tc .\n    ?definingTreatment dc:creator ?definingTreatmentCreator .\n    OPTIONAL { ?definingTreatment treat:publishedIn ?definingPubl .\n      ?definingPubl dc:date ?definingDate . }} \n}";return this._sparqlEndpoint.getSparqlRDF(e).then((function(t){var e=y()(T.a.sym("http://filteredpush.org/ontologies/oa/dwcFP#TaxonConcept"),t);return e.in(T.a.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))}))}},{key:"getImages",value:function(t){var e="PREFIX treat: <http://plazi.org/vocab/treatment#>\nPREFIX dwc: <http://rs.tdwg.org/dwc/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX fabio: <http://purl.org/spar/fabio/>\nPREFIX dc: <http://purl.org/dc/elements/1.1/>\nSELECT ?url ?description WHERE {   \n  ?treatment (treat:augmentsTaxonConcept|treat:definesTaxonConcept) <"+t+"> .\n  ?treatment <http://purl.org/spar/cito/cites> ?cites.\n  ?cites rdf:type fabio:Figure. \n  ?cites fabio:hasRepresentation ?url.\n  ?cites dc:description ?description.  \n} ";return this._sparqlEndpoint.getSparqlResultSet(e).then((function(t){return t.results.bindings.map((function(t){var e={};return e.url=t.url.value,e.description=t.description.value,e}))}))}},{key:"getTaxonConcepts",value:function(t,e){var n='PREFIX dwc: <http://rs.tdwg.org/dwc/terms/>\nPREFIX treat: <http://plazi.org/vocab/treatment#>\nPREFIX dc: <http://purl.org/dc/elements/1.1/>\nCONSTRUCT {\n  ?tc dwc:rank ?rank .\n  ?tc dwc:phylum ?phylum .\n  ?tc dwc:kingdom ?kingdom .\n  ?tc dwc:class ?class .\n  ?tc dwc:family ?family .\n  ?tc dwc:order ?oder .\n  ?tc dwc:genus "'+t+'" .\n  ?tc dwc:species "'+e+'" .\n  ?tc a <http://filteredpush.org/ontologies/oa/dwcFP#TaxonConcept> .\n  ?tc treat:hasTaxonName ?tn .\n  ?augmentingTreatment treat:augmentsTaxonConcept ?tc .\n  ?augmentingTreatment dc:creator ?augmentingTreatmentCreator .\n  ?augmentingTreatment dc:date ?augmentingDate . \n  ?definingTreatment treat:definesTaxonConcept ?tc .\n  ?definingTreatment dc:creator ?definingTreatmentCreator .\n  ?definingTreatment dc:date ?definingDate . \n} WHERE { \n  ?tc dwc:rank ?rank .\n  ?tc dwc:phylum ?phylum .\n  ?tc dwc:kingdom ?kingdom .\n  ?tc dwc:class ?class .\n  ?tc dwc:family ?family .\n  ?tc dwc:order ?oder .\n  ?tc dwc:genus "'+t+'" .\n  ?tc dwc:species "'+e+'" .\n  ?tc a <http://filteredpush.org/ontologies/oa/dwcFP#TaxonConcept> . \n  OPTIONAL { ?tc treat:hasTaxonName ?tn . }\n  OPTIONAL { ?augmentingTreatment treat:augmentsTaxonConcept ?tc .\n    ?augmentingTreatment dc:creator ?augmentingTreatmentCreator .\n    OPTIONAL { ?augmentingTreatment treat:publishedIn ?augmentingPubl .\n      ?augmentingPubl dc:date ?augmentingDate . }} \n  OPTIONAL { ?definingTreatment treat:definesTaxonConcept ?tc .\n    ?definingTreatment dc:creator ?definingTreatmentCreator .\n    OPTIONAL { ?definingTreatment treat:publishedIn ?definingPubl .\n      ?definingPubl dc:date ?definingDate . }} \n}';return this._sparqlEndpoint.getSparqlRDF(n).then((function(t){var e=y()(T.a.sym("http://filteredpush.org/ontologies/oa/dwcFP#TaxonConcept"),t);return e.in(T.a.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))}))}}]),t}()),C=(n("a15b"),n("baa5"),n("4d63"),n("25f0"),n("c964")),P=function(){function t(e,n){Object(s["a"])(this,t),this._element=n,this._taxaManager=e}return Object(g["a"])(t,[{key:"setTaxon",value:function(t,e){var n=this,a=this,r={};function i(t){return T.a.sym("http://rs.tdwg.org/dwc/terms/"+t)}function c(t){return T.a.sym("http://plazi.org/vocab/treatment#"+t)}function o(t){return T.a.sym("http://purl.org/dc/elements/1.1/"+t)}function s(){var t=document.getElementsByClassName("truncate");t.forEach((function(t){var e=t.textContent;if(e.length>80){t.innerHTML=e.slice(0,81)+'<span hidden aria-hidden="false">'+e.slice(81)+"</span>";var n=document.createElement("span");n.innerHTML="...",n.classList.add("expandbtn"),n.addEventListener("click",(function(n){t.innerHTML=e,n.preventDefault()})),t.append(n)}}))}function u(t){var e=t.substring(t.lastIndexOf("/")+1),n=e.lastIndexOf("_");return e.substring(0,n).replace(new RegExp("_","g")," ")+", "+e.substring(n+1)}function d(t,e,n){t.each((function(t){return t})).then((function(t){return Promise.all(t.sort((function(t,e){var n=t.value.substring(t.value.length-4),a=e.value.substring(e.value.length-4);return n-a})).map(function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(e){var n,s,l,p,f,m,h,g,v,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=function(t){return t.each((function(t){return t})).then((function(t){return Promise.all(t.map(function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=' <a class="truncate" href="'+e.value+'">',t.next=3,e.out(o("creator")).each((function(t){return t.value}));case 3:return t.t1=t.sent.join("; "),t.t2=t.t0+t.t1,t.next=7,e.out(o("date")).each((function(t){return" "+t.value}));case 7:return t.t3=t.sent.join("/"),t.t4=t.t2+t.t3,t.abrupt("return",t.t4+"</a>");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(t){return t.join(" - ")}))}))},t.next=3,Promise.all(["kingdom","phylum","class","order","family","genus","species"].map(function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.out(i(n)).each((function(t){return t.value})).then((function(t){return t.join(", ")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(t){return"<tr><td>"+t.join("</td><td>")+"</td></tr>"}));case 3:if(n=t.sent,l=e.in(c("preferedName")),!(l.nodes.length>0)){t.next=11;break}return t.next=8,s(l);case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0="";case 12:if(p=t.t0,f=e.in(c("definesTaxonConcept")),!(f.nodes.length>0)){t.next=21;break}return t.next=17,s(f);case 17:t.t2=t.sent,t.t1="Defined by: "+t.t2,t.next=22;break;case 21:t.t1="Defining treatment not yet on plazi";case 22:if(m=t.t1,h=e.in(c("augmentsTaxonConcept")),!(h.nodes.length>0)){t.next=31;break}return t.next=27,s(h);case 27:t.t4=t.sent,t.t3="Augmented by: "+t.t4,t.next=32;break;case 31:t.t3="";case 32:return g=t.t3,v=document.createElement("li"),v.innerHTML+="<strong>"+u(e.value)+"</strong>",v.innerHTML+=p,v.innerHTML+='<table class="nobold card"><tr><th>Kingdom</th><th>Phylum</th><th>Class</th><th>Order</th><th>Family</th><th>Genus</th><th>Species</th></tr>'+n+"</table>",v.innerHTML+="<br/>"+m+"<br/>"+g,r[e.value]||(b=document.createElement("div"),b.classList.add("deprecations"),b.innerHTML="looking for deprecations...",v.appendChild(b),r[e.value]=!0,a._taxaManager.getNewTaxa(e.value).then((function(t){d(t,"Deprecated by",b),t.each((function(t){a.relatedTaxonEncountered(t.out(i("genus")).value+" "+t.out(i("species")).value)}))}))),a.taxonRendered(e.value),t.abrupt("return",v);case 41:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))})).then((function(t){if(t.length>0){n.innerHTML="<h4>"+e+"</h4>";var a=document.createElement("ul");t.forEach((function(t){return a.appendChild(t)})),n.appendChild(a),s()}else n.innerHTML=""}))}this._taxaManager.getTaxonConcepts(t,e).then((function(a){0===a.nodes.length?n._element.innerHTML="No treatment for "+t+" "+e+" found on plazi.":(window.location.hash=t+"+"+e,d(a,t+" "+e,n._element))}))}},{key:"reset",value:function(){this._element.innerHTML=""}},{key:"relatedTaxonEncountered",value:function(t,e){}},{key:"taxonRendered",value:function(t){}}]),t}(),I=n("96b7");window.addEventListener("load",(function(t){var e=new URLSearchParams(window.location.search),n=new b.a(e.get("endpoint")||"https://treatment.ld.plazi.org/sparql"),a=new k(n),i=new P(a,document.getElementById("taxon-name")),c=new E(a,document.getElementById("image-area")),o=new O(document.getElementById("wikidata-area")),s=new _(document.getElementById("vernacular-area")),u=document.getElementById("combinedfield");r=new I["a"](u,n),r.action=function(t){o.reset(),s.reset(),c.reset(),i.reset();var e=t.substring(0,t.indexOf(" ")),n=t.substr(t.indexOf(" ")+1);i.relatedTaxonEncountered=function(t,e){o.addTaxon(t+" "+e),s.addTaxon(t+" "+e)},i.taxonRendered=function(t){c.appendImages(t)},i.setTaxon(e,n),o.addTaxon(e+" "+n),s.addTaxon(e+" "+n)},!u.value&&window.location.hash&&(u.value=window.location.hash.substring(1).replace("+"," "),r.lookup())}));var L=Object(f["a"])(a=function(t){function e(){return Object(s["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(g["a"])(e,[{key:"onClick",value:function(){r.lookup()}}]),e}(f["b"]))||a,j=L,R=n("2877"),M=Object(R["a"])(j,m,h,!1,null,"1a1f77f8",null),N=M.exports,F=function(t){function e(){return Object(s["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(f["b"]);F=Object(p["a"])([Object(f["a"])({components:{Classic:N}})],F);var H=F,S=H,q=(n("5c0b"),Object(R["a"])(S,c,o,!1,null,null,null)),D=q.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(D)}}).$mount("#app")}});
//# sourceMappingURL=app.e570c93e.js.map